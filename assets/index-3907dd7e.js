var E=Object.defineProperty;var p=(a,e,t)=>e in a?E(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var l=(a,e,t)=>(p(a,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();const h="columns-resize-connected",r="columns-resize-active",u="columns-resize-growing",f="columns-resize-shrinking";class v{constructor(e,t,n,s=50,i){l(this,"elements");l(this,"minWidth");l(this,"width",0);l(this,"idx");l(this,"columns");l(this,"handleElements",[]);l(this,"id");l(this,"autoResizeHandles");this.id=e,this.elements=t,this.columns=n,this.idx=n.columns.length,this.minWidth=s,this.autoResizeHandles=i,this.getWidth()}get next(){return this.columns.columns[this.idx+1]}get previous(){return this.columns.columns[this.idx-1]}get canShrink(){return this.width>this.minWidth}get nextShrinkable(){let e=this.next;for(;e&&!e.canShrink;)e=e.next;return e}get selfOrPreviousShrinkable(){let e=this;for(;e&&!e.canShrink;)e=e.previous;return e}get isLast(){return this.idx==this.columns.columns.length-1}getWidth(){const e=this.elements.map(n=>n.clientWidth),t=Math.max(...e);this.width=t}setWidthDiff(e,t=!1){this.width+=e;const n=t&&this.canShrink?"1":"0",s=t?"1":"0",i=`${this.width}px`;this.elements.forEach(o=>{o.style.flex=`${s} ${n} ${i}`})}createHandlebars(){this.idx!=this.columns.columns.length-1&&this.elements.forEach(e=>{if(e.closest("[data-no-auto-resize-handles]")||e.querySelector("[data-resize-handle]"))return;const t=document.createElement("div");t.targetColumn=this,t.setAttribute("data-resize-handle",""),e.append(t)})}connectHandlebars(){this.handleElements=[],this.autoResizeHandles&&this.createHandlebars(),this.elements.forEach(e=>{const t=e.querySelector("[data-resize-handle]");t&&(t.targetColumn=this,this.handleElements.push(t))}),this.handleElements.forEach(e=>{e.addEventListener("pointerdown",this.columns.onPointerDown)}),this.addElementsClass(h),this.addHandlebarsClass(h)}disconnectHandlebars(){this.handleElements.forEach(e=>{e.removeEventListener("pointerdown",this.columns.onPointerDown)}),this.removeElementsClass(h),this.removeHandlebarsClass(h)}addElementsClass(e){this.elements.forEach(t=>{t.classList.add(e)})}removeElementsClass(e){this.elements.forEach(t=>{t.classList.remove(e)})}addHandlebarsClass(e){this.handleElements.forEach(t=>{t.classList.add(e)})}removeHandlebarsClass(e){this.handleElements.forEach(t=>{t.classList.remove(e)})}}class C{constructor(e,t){l(this,"columns",[]);l(this,"rootElement");l(this,"opts");l(this,"targetColumn");l(this,"lastResizeEventX",0);l(this,"lastGrowingColumn");l(this,"lastShrinkingColumn");l(this,"initialWidths",new Map);l(this,"onPointerDown",e=>{this.columns.forEach(t=>{t.getWidth(),t.setWidthDiff(0)}),this.lastResizeEventX=e.clientX,this.targetColumn=e.target.targetColumn,document.addEventListener("pointerup",this.onPointerUp,{once:!0}),document.addEventListener("pointermove",this.onPointerMove),this.rootElement.classList.add(r),this.targetColumn.addHandlebarsClass(r)});l(this,"onPointerUp",()=>{var e;this.columns.forEach(t=>t.setWidthDiff(0,!0)),document.removeEventListener("pointermove",this.onPointerMove),this.rootElement.classList.remove(r),(e=this.targetColumn)==null||e.removeHandlebarsClass(r),this.handleColumnsClasses(null,null)});l(this,"onPointerMove",e=>{var o,d,m;const t=e.clientX-this.lastResizeEventX;let n,s;if(t<0?(n=(o=this.targetColumn)==null?void 0:o.selfOrPreviousShrinkable,s=(d=this.targetColumn)==null?void 0:d.next):(n=(m=this.targetColumn)==null?void 0:m.nextShrinkable,s=this.targetColumn),!n||!s)return;const i=Math.min(Math.abs(t),n.width-n.minWidth);n.setWidthDiff(-i),s.setWidthDiff(i),this.handleColumnsClasses(s,n),this.lastResizeEventX=e.clientX});this.rootElement=e,this.opts=t,this.init(),this.prepare(),this.connect()}init(){const{minWidthByColumnId:e={},defaultMinWidth:t=50,autoResizeHandles:n=!1}=this.opts||{};this.columns=[];const s=[...this.rootElement.querySelectorAll("[data-column-id]")];new Set(s.map(o=>o.dataset.columnId)).forEach(o=>{this.columns.push(new v(o,s.filter(d=>d.dataset.columnId==o),this,o in e?e[o]:t,n))})}handleInitialWidths(){const e=this.columns.map(t=>t.id);(this.initialWidths.size!=e.length||!e.every(t=>this.initialWidths.has(t)))&&(this.initialWidths.clear(),this.columns.forEach(t=>{this.initialWidths.set(t.id,t.width)}))}prepare(){Promise.all(this.columns.map(e=>new Promise(t=>{e.elements.forEach(n=>{n.style.boxSizing="border-box",n.style.overflow="hidden",n.style.minWidth=e.minWidth+"px"}),requestAnimationFrame(()=>{e.getWidth(),e.setWidthDiff(0,!0),t()})}))).then(()=>{this.handleInitialWidths()})}connect(){this.columns.forEach(e=>e.connectHandlebars()),this.rootElement.classList.add(h)}disconnect(){this.onPointerUp(),this.columns.forEach(e=>e.disconnectHandlebars()),this.rootElement.classList.remove(h)}reconnect(){this.disconnect(),this.init(),this.prepare(),this.connect()}reset(){this.columns.forEach(e=>{e.width=this.initialWidths.get(e.id),e.setWidthDiff(0,!0)})}handleColumnsClasses(e,t){var n,s,i,o;this.lastGrowingColumn!=e&&(e==null||e.addElementsClass(r),e==null||e.addElementsClass(u),(n=this.lastGrowingColumn)==null||n.removeElementsClass(u),this.lastGrowingColumn!=t&&((s=this.lastGrowingColumn)==null||s.removeElementsClass(r))),this.lastShrinkingColumn!=t&&(t==null||t.addElementsClass(r),t==null||t.addElementsClass(f),(i=this.lastShrinkingColumn)==null||i.removeElementsClass(f),this.lastShrinkingColumn!=e&&((o=this.lastShrinkingColumn)==null||o.removeElementsClass(r))),this.lastGrowingColumn=e,this.lastShrinkingColumn=t}}const c=new C(document.querySelector("#wrapper"),{defaultMinWidth:70,minWidthByColumnId:{name:50},autoResizeHandles:!0});document.getElementById("disconnect").onclick=()=>{c.disconnect()};document.getElementById("reconnect").onclick=()=>{c.reconnect()};document.getElementById("reset").onclick=()=>{c.reset()};document.getElementById("colors-cbx").onchange=()=>{document.getElementById("wrapper").classList.toggle("colors")};
