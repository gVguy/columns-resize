var u=Object.defineProperty;var d=(r,t,n)=>t in r?u(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n;var o=(r,t,n)=>(d(r,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(e){if(e.ep)return;e.ep=!0;const i=n(e);fetch(e.href,i)}})();class a{constructor(t,n,s=50){o(this,"elements");o(this,"idx");o(this,"columns");o(this,"minWidth",0);o(this,"width",0);this.elements=t,this.columns=n,this.idx=n.columns.length,this.minWidth=s,this.getWidth()}get next(){return this.columns.columns[this.idx+1]}get previous(){return this.columns.columns[this.idx-1]}get canShrink(){return this.width>this.minWidth}get nextShrinkable(){let t=this.next;for(;t&&!t.canShrink;)t=t.next;return t}get selfOrPreviousShrinkable(){let t=this;for(;t&&!t.canShrink;)t=t.previous;return t}getWidth(){this.width=this.elements[0].clientWidth}setWidthDiff(t){this.width+=t,this.elements.forEach(n=>{n.style.flex=`0 0 ${this.width}px`})}}class m{constructor(t,n){o(this,"columns",[]);o(this,"rootElement");o(this,"opts");o(this,"targetColumn");o(this,"lastResizeEventX",0);o(this,"onPointerDown",t=>{this.lastResizeEventX=t.clientX,this.targetColumn=t.target.targetColumn,document.addEventListener("pointerup",this.onPointerUp,{once:!0}),document.addEventListener("pointermove",this.onPointerMove)});o(this,"onPointerUp",()=>{document.removeEventListener("pointermove",this.onPointerMove)});o(this,"onPointerMove",t=>{var l,h,c;const n=t.clientX-this.lastResizeEventX,s=Math.abs(n);let e,i;n<0?(e=(l=this.targetColumn)==null?void 0:l.selfOrPreviousShrinkable,i=(h=this.targetColumn)==null?void 0:h.next):(e=(c=this.targetColumn)==null?void 0:c.nextShrinkable,i=this.targetColumn),!(!e||!i)&&(e.setWidthDiff(-s),i.setWidthDiff(s),this.lastResizeEventX=t.clientX)});this.rootElement=t,this.opts=n,this.init(),this.prepare(),this.connect()}init(){const{minWidthByColumnId:t={},defaultMinWidth:n=50}=this.opts||{};this.columns=[];const s=[...this.rootElement.querySelectorAll("[data-column-id]")];new Set(s.map(i=>i.dataset.columnId)).forEach(i=>{this.columns.push(new a(s.filter(l=>l.dataset.columnId==i),this,i in t?t[i]:n))})}prepare(){this.columns.forEach(t=>{t.elements.forEach(n=>{n.style.boxSizing="border-box",n.style.overflow="hidden"}),requestAnimationFrame(()=>{t.getWidth(),t.setWidthDiff(0)})})}connect(t=!0){this.columns.forEach(n=>{n.elements.forEach(s=>{const e=s.querySelector("[data-resize-handle]");e&&(e.targetColumn=n,t?e.addEventListener("pointerdown",this.onPointerDown):e.removeEventListener("pointerdown",this.onPointerDown))})})}disconnect(){this.onPointerUp(),this.connect(!1)}reconnect(){this.disconnect(),this.init(),this.prepare(),this.connect()}}new m(document.querySelector("#wrapper"),{defaultMinWidth:70,minWidthByColumnId:{name:40}});
